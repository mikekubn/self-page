import React from 'react';
import type { NextPage } from 'next';
import Head from 'next/head';
import { LeftSideHomePage, RightSideHomePage } from '@/components/Sections/HomeSection';
import { useIntersection } from '../hooks';

const Home: NextPage = (): React.ReactElement => {
  const [startPositionY, setStartPositionY] = React.useState<number>();
  const [homeRef] = useIntersection({
    root: null,
    rootMargin: '0px',
    threshold: 1,
  });
  const [technologyRef] = useIntersection({
    root: null,
    rootMargin: '0px',
    threshold: 1,
  });
  const [contantRef] = useIntersection({
    root: null,
    rootMargin: '0px',
    threshold: 1,
  });

  React.useEffect(() => {
    const { scrollY } = window;
    setStartPositionY(scrollY);
  }, [startPositionY]);

  const handleScroll = React.useCallback((e: Event) => {
    if (!e.currentTarget) {
      return;
    }

    if (!('scrollY' in e.currentTarget)) {
      return;
    }

    const { scrollY } = e.currentTarget;

    if (startPositionY !== undefined) {
      if (startPositionY > scrollY) {
        // console.log('up', scrollY);
      } else if (startPositionY < scrollY) {
        // console.log('down', scrollY);
      }
      setStartPositionY(scrollY);
    }
  }, [startPositionY]);

  React.useEffect(() => {
    window.addEventListener('scroll', handleScroll);

    return () => {
      window.removeEventListener('scroll', handleScroll);
    };
  }, [handleScroll]);

  return (
    <>
      <Head>
        <title>Michael Kub√≠n</title>
        <meta name="description" content="Generated by create next app" />
        <link rel="icon" href="/favicon.png" />
      </Head>
      <section ref={homeRef} id="home" className="flex h-screen pb-20">
        <LeftSideHomePage />
        <RightSideHomePage />
      </section>
      <section ref={technologyRef} id="technology" className="h-screen bg-green" />
      <section ref={contantRef} id="contact" className="h-screen bg-purple" />
    </>
  );
};

export default Home;
